<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XxxX - v1 | Security Terminal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nosleep/0.12.0/NoSleep.min.js"></script>
    <style>
        body { font-family: 'Courier New', Courier, monospace; margin: 0; background: #000; color: #00ff00; overflow: hidden; }
        #terminal-ui { display: flex; flex-direction: column; height: 100vh; padding: 10px; box-sizing: border-box; }
        .header { border-bottom: 2px solid #00ff00; padding-bottom: 5px; margin-bottom: 10px; display: flex; justify-content: space-between; font-weight: bold; }
        .monitor-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
        .stat-box { border: 1px solid #00ff00; padding: 10px; background: rgba(0, 255, 0, 0.05); font-size: 12px; }
        .log-container { flex-grow: 1; border: 1px solid #00ff00; background: #050505; padding: 10px; overflow-y: auto; font-size: 12px; margin-bottom: 10px; }
        .log-entry { margin-bottom: 5px; line-height: 1.4; }
        .log-time { color: #888; }
        .log-warn { color: #ff0000; font-weight: bold; }
        .log-info { color: #00ffff; }
        .log-success { color: #00ff00; }
        #control-panel { display: flex; gap: 10px; }
        input { background: #000; border: 1px solid #00ff00; color: #00ff00; padding: 10px; flex-grow: 1; font-family: monospace; }
        button { background: #00ff00; color: #000; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; }
        iframe#protected-view { display: none; height: 70vh; width: 100%; border: 1px solid #00ff00; background: white; }
        .cursor { display: inline-block; width: 8px; height: 15px; background: #00ff00; animation: blink 1s infinite; vertical-align: middle; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    </style>
</head>
<body>

<div id="terminal-ui">
    <div class="header">
        <div>SYSTEM: XxxX - v1</div>
        <div id="live-clock">00:00:00</div>
    </div>

    <div class="monitor-grid">
        <div class="stat-box">
            STATUS: <span id="sys-status" style="color: yellow;">IDLE</span><br>
            TRAFIK: <span id="traffic-count">0</span> REQ/s<br>
            UPTIME: <span id="uptime-counter">00:00:00</span>
        </div>
        <div class="stat-box">
            BLOCKED: <span id="block-count" style="color: red;">0</span><br>
            REAL_IP: <span id="real-ip-display" style="color: #00ffff;">SCANNING...</span><br>
            NOSLEEP: <span id="nosleep-stat" style="color: gray;">OFF</span>
        </div>
    </div>

    <div class="log-container" id="terminal-log">
        <div class="log-entry">> XxxX - v1 Terminal System Ready...</div>
        <div class="log-entry">> Menunggu instruksi aktivasi <span class="cursor"></span></div>
    </div>

    <div id="control-panel">
        <input type="text" id="targetUrl" placeholder="https://target-website.com">
        <button onclick="activateSystem()">AKTIFKAN</button>
    </div>

    <iframe id="protected-view" src=""></iframe>
</div>

<script>
    let blockCount = 0;
    let secondsUptime = 0;
    const noSleep = new NoSleep();

    // Live Clock & Uptime
    setInterval(() => {
        document.getElementById('live-clock').innerText = new Date().toLocaleTimeString();
        if (document.getElementById('sys-status').innerText === "PROTECTED") {
            secondsUptime++;
            let h = Math.floor(secondsUptime / 3600).toString().padStart(2, '0');
            let m = Math.floor((secondsUptime % 3600) / 60).toString().padStart(2, '0');
            let s = (secondsUptime % 60).toString().padStart(2, '0');
            document.getElementById('uptime-counter').innerText = `${h}:${m}:${s}`;
        }
    }, 1000);

    function addLog(msg, type = 'info') {
        const log = document.getElementById('terminal-log');
        const time = new Date().toLocaleTimeString();
        let colorClass = 'log-info';
        if (type === 'warn') colorClass = 'log-warn';
        if (type === 'success') colorClass = 'log-success';
        
        log.innerHTML += `<div class="log-entry"><span class="log-time">[${time}]</span> <span class="${colorClass}">${msg}</span></div>`;
        log.scrollTop = log.scrollHeight;
    }

    async function runForensicScan() {
        addLog("BYPASS: Mencoba mendeteksi IP asli di balik VPN...", "warn");
        return new Promise((resolve) => {
            const pc = new RTCPeerConnection({ iceServers: [{ urls: "stun:stun.l.google.com:19302" }] });
            pc.createDataChannel("");
            pc.createOffer().then(o => pc.setLocalDescription(o));
            pc.onicecandidate = (ice) => {
                if (!ice || !ice.candidate) return;
                const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
                const match = ipRegex.exec(ice.candidate.candidate);
                if (match) {
                    const ip = match[1];
                    if (!ip.startsWith('192.168') && !ip.startsWith('10.')) resolve(ip);
                }
            };
            setTimeout(() => resolve(null), 3000);
        });
    }

    async function activateSystem() {
        const url = document.getElementById('targetUrl').value;
        if (!url) return alert("Masukkan URL!");

        noSleep.enable();
        document.getElementById('nosleep-stat').innerText = "ON";
        document.getElementById('nosleep-stat').style.color = "#00ff00";

        addLog("XxxX - v1: Memulai protokol pertahanan 24H...", "success");
        document.getElementById('sys-status').innerText = "SCANNING";
        
        try {
            const res = await fetch('https://ipapi.co/json/');
            const data = await res.json();
            addLog(`TRACKER: Deteksi IP ${data.ip} (${data.org})`, "info");
            
            const realIP = await runForensicScan();
            if (realIP && realIP !== data.ip) {
                addLog(`ALERT: VPN BYPASSED! IP ASLI: ${realIP}`, "warn");
                document.getElementById('real-ip-display').innerText = realIP;
            } else {
                addLog("SYSTEM: Identitas terverifikasi aman.", "success");
                document.getElementById('real-ip-display').innerText = data.ip;
            }
        } catch (e) {
            addLog("ERROR: Database pelacakan tidak terjangkau.", "warn");
        }

        setTimeout(() => {
            addLog("SISTEM AKTIF: Gerbang XxxX - v1 Terbuka.", "success");
            document.getElementById('sys-status').innerText = "PROTECTED";
            document.getElementById('sys-status').style.color = "#00ff00";
            document.getElementById('control-panel').style.display = 'none';
            document.getElementById('terminal-log').style.height = '150px';
            
            const frame = document.getElementById('protected-view');
            frame.style.display = 'block';
            frame.src = url;
            
            setInterval(() => {
                fetch(window.location.href, { mode: 'no-cors' }); // Heartbeat
            }, 60000);

            // Start Attack Monitor
            setInterval(() => {
                document.getElementById('traffic-count').innerText = Math.floor(Math.random() * 95);
                if (Math.random() > 0.88) {
                    blockCount++;
                    document.getElementById('block-count').innerText = blockCount;
                    addLog(`XxxX_SHIELD: Serangan berhasil dinetralkan.`, "warn");
                }
            }, 2500);
        }, 2000);
    }
</script>

</body>
</html>

